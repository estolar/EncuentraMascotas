<!-- app/views/pages/home.html.erb -->

<!-- Navbar -->
<%# <%= render 'shared/navbar' %>

<!-- Carrusel que ocupa todo el ancho -->
<div class="container-fluid p-0">
  <div id="carouselExampleIndicators" class="carousel slide" data-bs-ride="carousel" style="height: 400px;">
    <ol class="carousel-indicators">
      <li data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0" class="active"></li>
      <li data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1"></li>
      <li data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2"></li>
    </ol>
    <div class="carousel-inner" style="height: 400px;">
      <div class="carousel-item active">
        <img src="https://theressa.net/images/articles/61e835d1226b8-mascotas.jpg" class="d-block w-100" alt="Slide 1" style="object-fit: cover; height: 100%; display: block;">
      </div>
      <div class="carousel-item">
        <img src="https://e00-expansion.uecdn.es/assets/multimedia/imagenes/2022/02/08/16443364419282.jpg" class="d-block w-100" alt="Slide 2" style="object-fit: cover; height: 100%; display: block;">
      </div>
      <div class="carousel-item">
        <img src="https://www.triada.com.pe/noticias/wp-content/uploads/2022/05/MascotasHuesito-1210x700.jpg" class="d-block w-100" alt="Slide 3" style="object-fit: cover; height: 100%; display: block;">
      </div>
    </div>
    <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-bs-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="sr-only">Previous</span>
    </a>
    <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-bs-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="sr-only">Next</span>
    </a>
  </div>
</div>
<!-- Botón Mascotas Perdidas -->
  <%= link_to 'Mascotas Perdidas', petlosts_path, class: 'btn btn-primary' %>

  <!-- Botón Mascotas Encontradas -->
  <%= link_to 'Mascotas Encontradas', new_petfound_path, class: 'btn btn-success' %>


<!-- Button trigger modal -->
<!-- Button trigger modal -->
<button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#staticBackdrop">
  Prueba Boostrap & Modal
</button>

<!-- Modal -->
<div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="staticBackdropLabel">Modal title</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        ...
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Understood</button>
      </div>
    </div>
  </div>
</div>
</div>
<!-- Filtros por Categoría con Íconos PNG -->
<div class="container text-center my-4">
  <div class="row justify-content-center">
    <!-- Aquí, @categories y los iconos necesitan estar definidos -->
    <% if @categories.present? %>
      <% @categories.each do |category| %>
        <div class="col-auto">
          <%= image_tag "#{category.category.downcase.gsub(' ', '_')}.png", alt: category.category, class: "category-icon" %> <!-- Comentado hasta que existan las imágenes y categorías -->
        </div>
      <% end %>
    <% else %>
      <p>No hay categorías disponibles.</p> <!-- Mensaje alternativo para cuando no haya categorías -->
    <% end %>
  </div>
</div>

<!-- Cards de Mascotas Perdidas -->
<section class="container mt-5">
  <h2 class="text-center">Mascotas Perdidas</h2>
  <div class="row">
    <% if @lost_pets.present? %> <!-- Evitar errores si no hay mascotas perdidas -->
      <% @lost_pets.each do |pet| %>
        <div class="col-md-3">
          <div class="card mb-4 shadow-sm">
            <%= image_tag pet.image_url, class: 'card-img-top', alt: pet.name %> <!-- pet.image_url debe existir -->
            <div class="card-body">
              <h5 class="card-title"><%= pet.name %></h5> <!-- pet.name debe existir -->
              <p class="card-text"><%= truncate(pet.description, length: 100) %> <!-- pet.description debe existir -->
              <!-- <%= link_to 'Ver más', pet_path(pet), class: 'btn btn-primary' %> --> <!-- Comentado hasta que pet_path esté definido -->
            </div>
          </div>
        </div>
      <% end %>
    <% else %>
      <p>No hay mascotas perdidas disponibles.</p> <!-- Mensaje alternativo si no hay datos -->
    <% end %>
  </div>
</section>

<!-- Cards de Mascotas Encontradas -->
<section class="container mt-5">
  <h2 class="text-center">Mascotas Encontradas</h2>
  <div class="row">
    <% if @found_pets.present? %> <!-- Evitar errores si no hay mascotas encontradas -->
      <% @found_pets.each do |pet| %>
        <div class="col-md-3">
          <div class="card mb-4 shadow-sm">
            <%= image_tag pet.image_url, class: 'card-img-top', alt: pet.name %> <!-- pet.image_url debe existir -->
            <div class="card-body">
              <h5 class="card-title"><%= pet.name %></h5> <!-- pet.name debe existir -->
              <p class="card-text"><%= truncate(pet.description, length: 100) %> <!-- pet.description debe existir -->
              <!-- <%= link_to 'Ver más', pet_path(pet), class: 'btn btn-primary' %> --> <!-- Comentado hasta que pet_path esté definido -->
            </div>
          </div>
        </div>
      <% end %>
    <% else %>
      <p>No hay mascotas encontradas disponibles.</p> <!-- Mensaje alternativo si no hay datos -->
    <% end %>
  </div>
</section>

<!-- Reviews de Usuarios -->
<section class="container mt-5">
  <h2 class="text-center">Personas que han encontrado a sus mascotas</h2>
  <div class="row">
    <% if @reviews.present? %> <!-- Evitar errores si no hay reseñas -->
      <% @reviews.each do |review| %>
        <div class="col-md-4">
          <div class="card mb-4 shadow-sm">
            <div class="card-body">
              <h5 class="card-title"><%= review.user_name %></h5> <!-- review.user_name debe existir -->
              <p class="card-text"><%= review.content %></p> <!-- review.content debe existir -->
              <div class="rating">
                <% review.stars.times do %>
                  <i class="fa fa-star"></i>
                <% end %>
              </div>
            </div>
          </div>
        </div>
      <% end %>
    <% else %>
      <p>No hay reseñas disponibles.</p> <!-- Mensaje alternativo si no hay reseñas -->
    <% end %>
  </div>
</section>

<!-- Footer -->
<%= render 'shared/footer' %>
